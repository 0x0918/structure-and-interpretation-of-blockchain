本章旨在介绍基本的密码学知识，从区块链整体框架来看，通过本章可以了解到如何在节点间建立一个安全的物理连接，保证节点间数据可信的传输，这也是区块链信任机器最基本的基石，同时本章知识也为后面章节涉及密码学相关的技术作为铺垫。

&emsp;&emsp;想象一下，如果我们不采用任何技术手段，在一条不加密的网络链路上传输信息可能会面临哪些问题呢？
- 窃听风险：黑客可能监听双方的通信链路，偷听双方的通信内容。
- 篡改风险：黑客可以随意修改双方的通信内容，双方无法正确的传递消息。
- 冒充风险：黑客可以冒充任意一个人的身份参与通信。

&emsp;&emsp;可以看到如果在一条不加密的网络上通信是无法保证信息的可靠传输的，在此基础上建立的应用也就没有可信之说。

&emsp;&emsp;为了解决上面的三个问题，我们就需要一套密码体系。

### 基本元素
通常一个密码体系由一个五元组组成，这个五元组的构成如下；
- 明文M：原始数据，待加密的数据；
- 密文C：对明文M进行一定变换或伪装后的输出；
- 密钥K：加密或解密中所使用的专门工具；
- 加密E：将明文M，通过密钥K变换得到密文C的过程；
- 解密D：将密文还原成明文M的过程；


一个密码系统的构建就是基于这个五元组{ M，C，K，E，D }，整个区块链系统都是基于这个密码体系展开。

### 对称加密
对称加密是指进行明文到密文加密和密文到明文解密时使用相同的秘钥，对称加密的安全性依赖于加密算法的安全性和秘钥的长度。

![Alt text](https://github.com/Ice-Storm/structure-and-interpretation-of-blockchain/blob/master/img/chapter_1/1.png?raw=true)

优点：算法公开，速度快，保密强度高，占用空间小；

缺点：秘钥的分发和管理比较复杂；

用途：大量数据的加密；

代表算法：DES，AES；

问题：在没有建立安全信道之前，秘钥无法实现安全的交换；

### 非对称加密
非对称加密是指进行明文到密文加密和密文到明文解密时使用不同的秘钥，每个用户都有一对秘钥，一个用于加密，一个用于解密，其中加密秘钥可以公开，称之为公钥（Public Key），解密秘钥需要严格保存不能公开，称之为私钥（Private Key）。

![Alt text](https://github.com/Ice-Storm/structure-and-interpretation-of-blockchain/blob/master/img/chapter_1/2.png?raw=true)


优点：通信双方不需要通过建立一个安全的信道来进行秘钥的交换，降低了秘钥管理的难度；

缺点：加解密速度慢于对称加密，不适合大量数据的加解密；
缺点：加解密速度慢于对称加密，不适合大量数据的加解密；

常见的散列算法：MD5、SHA、SHA-256、SHA-512

### 数字签名
数字签名是指发送以电子形式签名一个消息或文件，签名后的消息表示签名人对该消息的内容负责。数字签名使用了消息摘要和非对称加密技术，可以保证接受者能够核实发送者对消息的签名，发送者事后不能抵赖对消息的签名，接受者不能篡改报文内容和伪造对报文的签名。

通过数字签名可以确保两点；
- 确认信息是由签名者发送；
- 确认信息从签发到接受没有被修改过，包括传输中的中间人修改。

数字签名的过程：
- 发送方要发送消息运用散列函数（MD5、SHA-1等）形成消息摘要；
- 发送方用自己的私钥对消息摘要进行加密，形成数字签名；
- 发送方将数字签名附加在消息后发送给接收方；
- 接受方用发送方的公钥对签名信息进行解密，得到消息摘要；
- 接收方以相同的散列函数对接收到的消息进行散列，也得到一份消息摘要；
- 接收方比较两个消息摘要，如果完全一致，说明数据没有被篡改，签名真实有效；否则拒绝该签名。

### 数字证书
数字证书是一种权威的电子证明，由权威公正的第三方认证机构（CA）签发，广泛用于涉及需要身份认证和数据安全的领域。

数字证书主要用来保证信息保密、身份确认、不可否认性、数据完整性，常见的格式是`X.509`。

在区块链中系统中，节点间安全通性，身份认证，智能合约，共识算法模块中都大量使用到了上述算法来保证各个模块的安全可靠。
